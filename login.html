<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>登录页</title>
    <!-- 引入 jQuery Mobile 样式 -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <!-- 引入 jQuery 库 -->
    <script src="js/jquery-1.11.3.min.js"></script>
    <!-- 引入 jQuery Mobile 库 -->
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
	<style type="text/css">
		#account,#passwd{ 
			height: 50px;
			width: 100%;
			
		}
		
		#login{
			margin-top: 20px;
			color: white;
			background-color: rgb(66,177,255);
			text-shadow: 1px 1px 1px #333;
			
		}
		
		#register{
			margin-top: 30px;
			text-align: center;
		}
	</style>
</head>
<body>
	<div data-role="page">
	  <div data-role="header">
	    <h1>登录</h1>
	  </div>
	
	  <div data-role="main" class="ui-content">
	    <input type="text" id="account" value="" placeholder="账号" />
		<p></p>
		<input type="password" id="passwd" value="" placeholder="密码" />
		<button type="button" id="login">登录</button>
		
		<div id="register">
			<p>没有账号？<a href="register.html" rel="external" >立即注册</a></p>
		</div>
		
	  </div>
	  
	
	
	</div> 
</body>

<script type="text/javascript">
	var acc = document.querySelector("#account");
	var pwd = document.querySelector("#passwd");
	var login = document.querySelector("#login");
	
	login.onclick = function(){
		var user = acc.value;
		var passwd = pwd.value;
		
		
		if(localStorage.getItem(user)){
			var user_info = JSON.parse(localStorage.getItem(user));
			if(user_info.passwd==passwd){
				var url = "main.html" + "?" + "username="+ encodeURI(user) + "&password=" + encodeURI(passwd) + "&operate=none";
				window.location.href = url;
			}
			else if(passwd==""){
				alert("请输入密码！");
			}
			else{
				alert("密码错误，请重新输入！");
				pwd.value = "";
			}
		}
		else{
			if(user==""){
				alert("请输入用户名");
			}
			else{
				alert("该用户不存在，请先注册再登录");
			}
		}
	}
</script>
</html>
